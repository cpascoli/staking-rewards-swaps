(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6227)}])},3111:function(n,e,t){"use strict";t.d(e,{LA:function(){return o},Qc:function(){return k},TV:function(){return v},V9:function(){return u},Wf:function(){return l},ZV:function(){return m},dQ:function(){return j},hf:function(){return w},hh:function(){return g},jv:function(){return h},kH:function(){return p},oV:function(){return x},wn:function(){return f}});var r=t(9279),i=t(4627),a=t(391),d=t(5811),s=t(7979).m4.chainId,o=function(n,e){var t,r=(null!==(t=(0,i.W)({contract:(0,d.sJ)(s),method:"canWithdraw",args:n?[n,e]:[0,!1]}))&&void 0!==t?t:{}).value;return r&&r[0]},c=function(){var n,e=(null!==(n=(0,i.W)({contract:(0,d.sJ)(s),method:"getSwaps",args:[]}))&&void 0!==n?n:{}).value;return null===e||void 0===e?void 0:e[0].map((function(n){return S(n)}))},l=function(){var n;return null===(n=c())||void 0===n?void 0:n.filter((function(n){return void 0===n.taker.user}))},u=function(){var n;return null===(n=c())||void 0===n?void 0:n.filter((function(n){return void 0!==n.taker.user}))},h=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,d.sJ)(s),method:"getSwap",args:[n]}))&&void 0!==e?e:{}).value,r=null===t||void 0===t?void 0:t[0];if(void 0!==r)return S(r)},f=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,d.sJ)(s),method:"canSettle",args:[n]}))&&void 0!==e?e:{}).value;return[null===t||void 0===t?void 0:t[0],null===t||void 0===t?void 0:t[1]]},v=function(n){var e=(0,d.sJ)(s),t=n.map((function(n){return{contract:e,method:"canSettle",args:[n]}})),r=(0,i.G)(t),a={};return r.forEach((function(e,t){var r,i;a[n[t]]=[!0===(null===e||void 0===e||null===(r=e.value)||void 0===r?void 0:r[0]),!0===(null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i[1])]})),a},x=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,d.sJ)(s),method:"previewRewards",args:n?[n]:[0]}))&&void 0!==e?e:{}).value;return[null===t||void 0===t?void 0:t[0],null===t||void 0===t?void 0:t[1]]},j=function(){var n,e=(null!==(n=(0,i.W)({contract:(0,d.sJ)(s),method:"token",args:[]}))&&void 0!==n?n:{}).value;return null===e||void 0===e?void 0:e[0]},m=function(n){var e=(0,d.sJ)(n),t=(0,a.j)(e,"offer",{transactionName:"Offer Swap"}),r=t.send;return{offer:function(n,e,t,i){return r(n,e,t,i)},offerState:t.state}},w=function(n){var e=(0,d.sJ)(n),t=(0,a.j)(e,"take",{transactionName:"Take Swap"}),r=t.send;return{take:function(n){return r(n)},takeState:t.state}},p=function(n){var e=(0,d.sJ)(n),t=(0,a.j)(e,"cancel",{transactionName:"Cancel Swap Offer"}),r=t.send;return{cancel:function(n){return r(n)},cancelState:t.state}},g=function(n){var e=(0,d.sJ)(n),t=(0,a.j)(e,"settle",{transactionName:"Settle"}),r=t.send;return{settle:function(n){return r(n)},settleState:t.state}},k=function(n){var e=(0,d.sJ)(n),t=(0,a.j)(e,"withdraw",{transactionName:"Withdraw"}),r=t.send;return{withdraw:function(n){return r(n)},withdrawState:t.state}},S=function(n){return{id:n.id.toNumber(),maker:Z(n.maker),taker:Z(n.taker)}},Z=function(n){var e=n.user!=r.d;return{user:e?n.user:void 0,createdAt:e?new Date(1e3*n.createdAt.toNumber()):void 0,amount:n.amount,period:n.period.toNumber(),shares:n.shares,isSettled:n.isSettled,totalWithdrawn:n.totalWithdrawn,withdrawal:{unbondNonce:0==n.withdrawal.unbondNonce.toNumber()?void 0:n.withdrawal.unbondNonce.toNumber(),isClaimed:n.withdrawal.isClaimed,amount:n.withdrawal.amount.isZero()?void 0:n.withdrawal.amount}}}},6227:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(5893),i=t(9873),a=t.n(i),d=t(6042),s=t(9396),o=t(9534),c=t(603),l=t(7294),u=t(1163),h=t(7495),f=t(3111),v=t(5616),x=t(9417),j=t(5056),m=t(6332),w=t(3795),p=t(1435),g=function(n){var e=(0,u.useRouter)(),t=n.offers;return(0,r.jsxs)(j.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"ID"}),(0,r.jsx)("td",{children:"Created At"}),(0,r.jsx)("td",{colSpan:3,align:"center",children:"Swap Offer Info"}),(0,r.jsx)("td",{})]})}),(0,r.jsx)("tbody",{children:t&&t.map((function(n,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.id}),(0,r.jsx)("td",{children:(0,r.jsx)(m.Z,{title:(0,p.o0)(n.maker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.maker.createdAt)})})}),(0,r.jsxs)("td",{align:"right",children:[(0,p.Bw)(n.maker.amount,2)," MATIC for ",Math.round(n.maker.period/86400)," days"]}),(0,r.jsx)("td",{align:"center",children:" \ud83d\udd00 "}),(0,r.jsxs)("td",{align:"left",children:[(0,p.Bw)(n.taker.amount,2)," MATIC for ",Math.round(n.taker.period/86400)," days"]}),(0,r.jsx)("td",{style:{textAlign:"center"},children:(0,r.jsx)(w.Z,{onClick:function(){return e.push("/offer/".concat(n.id))},children:" Details"})})]},t)}))})]})},k=function(){var n,e=(0,u.useRouter)(),t=((0,f.dQ)(),(0,h.K)().account),i=null===(n=(0,f.Wf)())||void 0===n?void 0:n.reverse();if(!i)return(0,r.jsx)(v.Z,{textAlign:"center",sx:{marginTop:10,marginBottom:8},children:"Loading..."});var a=null===i||void 0===i?void 0:i.filter((function(n){return n.maker.user===t})),d=null===i||void 0===i?void 0:i.filter((function(n){return n.maker.user!==t}));return(0,r.jsxs)("div",{children:[a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"My Swap Offers"}),(0,r.jsx)("div",{style:{margin:"auto"},children:(0,r.jsx)(g,{offers:a})})]}),d.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:a.length>0?"Other Swap Offers":"Swap Offers"}),(0,r.jsx)("div",{style:{margin:"auto"},children:(0,r.jsx)(g,{offers:d})})]}),0===i.length&&(0,r.jsx)(v.Z,{textAlign:"center",children:(0,r.jsx)("h3",{children:"No Offers - Create a new Swap Offer"})}),(0,r.jsx)(v.Z,{sx:{mt:4},textAlign:"center",children:(0,r.jsx)(x.Z,{variant:"contained",onClick:function(){e.push("/new-swap")},children:"New Offer"})})]})},S=function(n){var e=n.swaps,t=n.canSettleSwapsInfoDict,i=void 0===t?{}:t,a=(0,u.useRouter)();return(0,r.jsxs)(j.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"ID"}),(0,r.jsx)("td",{children:"Created At"}),(0,r.jsx)("td",{children:"Taken At"}),(0,r.jsx)("td",{colSpan:3,align:"center",children:"Swap Info"}),(0,r.jsx)("td",{children:"Can Settle"}),(0,r.jsx)("td",{})]})}),(0,r.jsx)("tbody",{children:e&&e.map((function(n,e){var t=i&&i[n.id]?!0===i[n.id][0]||!0===i[n.id][1]:void 0;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.id}),(0,r.jsx)("td",{children:(0,r.jsx)(m.Z,{title:(0,p.o0)(n.maker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.maker.createdAt)})})}),(0,r.jsx)("td",{children:n.taker.createdAt&&(0,r.jsx)(m.Z,{title:(0,p.o0)(n.taker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.taker.createdAt)})})}),(0,r.jsxs)("td",{align:"right",children:[(0,p.Bw)(n.maker.amount,2)," MATIC for ",Math.round(n.maker.period/86400)," days"]}),(0,r.jsx)("td",{align:"center",children:" \ud83d\udd00 "}),(0,r.jsxs)("td",{align:"left",children:[(0,p.Bw)(n.taker.amount,2)," MATIC for ",Math.round(n.taker.period/86400)," days"]}),(0,r.jsx)("td",{align:"center",children:!0===t&&"\u2705"}),(0,r.jsx)("td",{children:(0,r.jsx)(w.Z,{onClick:function(){return e=n.id,void a.push("/swap/".concat(e));var e},children:" Details "})})]},e)}))})]})},Z=function(){(0,u.useRouter)();var n=(0,f.V9)(),e=(0,h.K)().account,t=n&&n.reverse(),i=n&&e?t.filter((function(n){return n.maker.user===e||n.taker.user===e})):[],a=n&&e?t.filter((function(n){return n.maker.user!==e&&n.taker.user!==e})):n||[];console.log(">>> swaps:",i,a);var d=(0,f.TV)(n?n.map((function(n){return n.id})):[]);return n?(0,r.jsxs)("div",{children:[i.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"My Swaps"}),(0,r.jsx)("div",{style:{margin:"auto"},children:(0,r.jsx)(S,{swaps:i,canSettleSwapsInfoDict:d})})]}),a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:i.length>0?"Other Swaps":"Swaps"}),(0,r.jsx)("div",{style:{margin:"auto"},children:(0,r.jsx)(S,{swaps:a,canSettleSwapsInfoDict:d})})]}),0===t.length&&(0,r.jsx)(v.Z,{textAlign:"center",children:(0,r.jsx)("h3",{children:"No Swaps"})})]}):(0,r.jsx)(v.Z,{textAlign:"center",sx:{marginTop:10,marginBottom:8},children:"Loading..."})},b=t(1703),A=t(44);function N(n){var e=n.children,t=n.value,i=n.index,a=(0,o.Z)(n,["children","value","index"]);return(0,r.jsx)("div",(0,s.Z)((0,d.Z)({role:"tabpanel",hidden:t!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},a),{children:t===i&&(0,r.jsx)(v.Z,{sx:{p:3},children:e})}))}var C=function(){var n=(0,c.Z)(l.useState(0),2),e=n[0],t=n[1],i=(0,u.useRouter)().query.selectedTab;(0,l.useEffect)((function(){i&&"swaps"===i&&(console.log("Selected Item ID: ".concat(i)),t(1))}),[i]);return(0,r.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,r.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(b.Z,{value:e,onChange:function(n,e){t(e)},"aria-label":"staker tabs",children:[(0,r.jsx)(A.Z,{label:"Offers"},1),(0,r.jsx)(A.Z,{label:"Swaps"},2)]})}),(0,r.jsx)(N,{value:e,index:0,children:(0,r.jsx)(k,{})},"mainnet"),(0,r.jsx)(N,{value:e,index:1,children:(0,r.jsx)(Z,{})},"sepolia")]})},y=function(){return(0,r.jsx)("div",{className:a().main,children:(0,r.jsx)(C,{})})},_=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(y,{})})}},9873:function(n){n.exports={main:"Main_main__NBUfF"}}},function(n){n.O(0,[901,156,662,774,888,179],(function(){return e=8312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);