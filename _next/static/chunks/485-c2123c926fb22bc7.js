(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{4721:function(t,n,e){"use strict";var r=e(4836);n.Z=void 0;var i=r(e(4938)),a=e(5893);n.Z=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},2485:function(t,n,e){"use strict";e.d(n,{Z:function(){return _}});var r=e(5893),i=e(7294),a=e(7495),s=e(3795),d=e(5616),o=e(9417),u=e(8456),c=e(5861),l=e(8703),h=e(1737),v=e(3111),f=e(9279),w=e(4627),x=e(5811),j=e(7979),m=e(1762),p=j.m4.chainId,S=function(t){var n,e=m.SEPOLIA.STAKER,r=(null!==(n=(0,w.W)({contract:(0,x._k)(p),method:"unbonds_new",args:t?[e,t]:[f.d,0]}))&&void 0!==n?n:{}).value;return r&&r[1].toNumber()},g=j.m4.chainId,k=e(7737),N=e(1435),b=e(1385),C=e.n(b),W=e(6332),Z=e(4721),A=e(3946),I=e(5697),M=function(t){var n=t.message;return(0,r.jsx)(W.Z,{title:n,style:{maxHeight:20},children:(0,r.jsx)(A.Z,{children:(0,r.jsx)(Z.Z,{})})})};M.propTypes={message:e.n(I)().string.isRequired};var J=M,_=function(t){var n,e,f,j=t.swapId,m=t.side,p=t.address,b=t.size,W=t.duration,Z=t.createdAt,A=t.takenAt,I=t.rewards,M=t.shares,_=t.isSettled,E=t.isClaimed,T=t.canSettle,y=t.withdrawNonce,L=(0,a.K)(),V=L.chainId,z=L.account,O=(0,v.LA)(j,"Maker"===m),R=(0,v.Qc)(V),q=R.withdraw,D=R.withdrawState,Q=function(){var t,n=(null!==(t=(0,w.W)({contract:(0,x.Wp)(g),method:"getCurrentEpoch",args:[]}))&&void 0!==t?t:{}).value;return n&&n[0].toNumber()}(),B=S(y),H=(0,i.useState)(!1),P=H[0],K=H[1],U=(0,i.useState)(!1),G=(U[0],U[1]),X=void 0;if(void 0!==O&&B&&Q){var Y=Q-B;X=Y>=80?0:80-Y}(0,i.useEffect)((function(){console.log(">> SwapSide - useEffect - withdrawState:",null===D||void 0===D?void 0:D.status),"Mining"===D.status&&G(!0),"Success"===D.status&&(G(!1),K(!0))}),[null===D||void 0===D?void 0:D.status,null===D||void 0===D||null===(n=D.transaction)||void 0===n?void 0:n.hash]);var F=function(t,n){"clickaway"!==n&&K(!1)};return(0,r.jsxs)("div",{className:C().swapside,children:[(0,r.jsx)("h2",{children:"Maker"===m?"Maker Side":"Taker Side"}),(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"User"}),(0,r.jsxs)("td",{children:[p&&(0,r.jsx)(s.Z,{href:(0,k.q)("SEPOLIA",p),target:"_blank",children:(0,k.X)(p)}),p===z&&(0,r.jsx)("span",{style:{marginLeft:10},children:"(You)"})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Size:"}),(0,r.jsxs)("td",{children:[(0,N.Bw)(b,2)," MATIC"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Duration:"}),(0,r.jsxs)("td",{children:[W/86400," days ",A&&(0,r.jsx)(J,{message:(0,N._Q)(A,W)})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Maker"==m?"Created At":"Taken At"}),(0,r.jsx)("td",{children:"Maker"==m?(0,N.p6)(Z):A&&(0,N.p6)(A)})]}),M&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Shares:"}),(0,r.jsxs)("td",{children:[" ",(0,N.Bw)(M,10)," TruMATIC"]})]}),I&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Rewards:"}),(0,r.jsxs)("td",{children:[I&&(0,N.Bw)(I,10)," MATIC"]})]}),_&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Settled:"}),(0,r.jsx)("td",{children:_?"\u2705 ":"No"})]}),0==_&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Can Settle:"}),(0,r.jsx)("td",{children:T?"Now ":"".concat((0,N.LW)(A,W))})]}),1==_&&void 0!==E&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Claimed:"}),(0,r.jsx)("td",{children:E?"\u2705":"No"})]})]})}),1==_&&0==E&&void 0!==O&&z===p&&(0,r.jsx)(d.Z,{textAlign:"center",children:(0,r.jsxs)(d.Z,{sx:{mt:2,marginLeft:"auto",marginRight:"auto"},alignItems:"center",style:{maxWidth:200},children:[(0,r.jsx)(o.Z,{variant:"outlined",onClick:function(){z===p?q(j):console.log("User is not the owner of this side of the swap")},disabled:0==O||"Mining"===D.status,startIcon:"Mining"===D.status?(0,r.jsx)(u.Z,{size:20}):null,children:"Claim"}),(0,r.jsxs)(c.Z,{sx:{mt:1},variant:"body2",color:"error",hidden:0===X,children:["wait ",X," epochs"]})]})}),(0,r.jsx)(l.Z,{open:P,autoHideDuration:6e3,onClose:F,children:(0,r.jsxs)(h.Z,{onClose:F,severity:"success",sx:{width:"100%"},children:["Swap principal claimed and rewards paid!",(0,r.jsx)("br",{}),"View on block explorer: "," ",(0,r.jsx)(s.Z,{href:(0,k.q)("SEPOLIA",null===D||void 0===D||null===(e=D.transaction)||void 0===e?void 0:e.hash,"transaction"),target:"_blank",children:null===D||void 0===D||null===(f=D.transaction)||void 0===f?void 0:f.hash})]})})]})}},3111:function(t,n,e){"use strict";e.d(n,{LA:function(){return o},Qc:function(){return g},TV:function(){return f},V9:function(){return l},Wf:function(){return c},ZV:function(){return j},dQ:function(){return x},hf:function(){return m},hh:function(){return S},jv:function(){return h},kH:function(){return p},oV:function(){return w},wn:function(){return v}});var r=e(9279),i=e(4627),a=e(391),s=e(5811),d=e(7979).m4.chainId,o=function(t,n){var e,r=(null!==(e=(0,i.W)({contract:(0,s.sJ)(d),method:"canWithdraw",args:t?[t,n]:[0,!1]}))&&void 0!==e?e:{}).value;return r&&r[0]},u=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,s.sJ)(d),method:"getSwaps",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0].map((function(t){return k(t)}))},c=function(){var t;return null===(t=u())||void 0===t?void 0:t.filter((function(t){return void 0===t.taker.user}))},l=function(){var t;return null===(t=u())||void 0===t?void 0:t.filter((function(t){return void 0!==t.taker.user}))},h=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"getSwap",args:[t]}))&&void 0!==n?n:{}).value,r=null===e||void 0===e?void 0:e[0];if(void 0!==r)return k(r)},v=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"canSettle",args:[t]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},f=function(t){var n=(0,s.sJ)(d),e=t.map((function(t){return{contract:n,method:"canSettle",args:[t]}})),r=(0,i.G)(e),a={};return r.forEach((function(n,e){var r,i;a[t[e]]=[!0===(null===n||void 0===n||null===(r=n.value)||void 0===r?void 0:r[0]),!0===(null===n||void 0===n||null===(i=n.value)||void 0===i?void 0:i[1])]})),a},w=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"previewRewards",args:t?[t]:[0]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},x=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,s.sJ)(d),method:"token",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0]},j=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"offer",{transactionName:"Offer Swap"}),r=e.send;return{offer:function(t,n,e,i){return r(t,n,e,i)},offerState:e.state}},m=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"take",{transactionName:"Take Swap"}),r=e.send;return{take:function(t){return r(t)},takeState:e.state}},p=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"cancel",{transactionName:"Cancel Swap Offer"}),r=e.send;return{cancel:function(t){return r(t)},cancelState:e.state}},S=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"settle",{transactionName:"Settle"}),r=e.send;return{settle:function(t){return r(t)},settleState:e.state}},g=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"withdraw",{transactionName:"Withdraw"}),r=e.send;return{withdraw:function(t){return r(t)},withdrawState:e.state}},k=function(t){return{id:t.id.toNumber(),maker:N(t.maker),taker:N(t.taker)}},N=function(t){var n=t.user!=r.d;return{user:n?t.user:void 0,createdAt:n?new Date(1e3*t.createdAt.toNumber()):void 0,amount:t.amount,period:t.period.toNumber(),shares:t.shares,isSettled:t.isSettled,totalWithdrawn:t.totalWithdrawn,withdrawal:{unbondNonce:0==t.withdrawal.unbondNonce.toNumber()?void 0:t.withdrawal.unbondNonce.toNumber(),isClaimed:t.withdrawal.isClaimed,amount:t.withdrawal.amount.isZero()?void 0:t.withdrawal.amount}}}},1385:function(t){t.exports={swapside:"SwapSide_swapside__WMDqp"}}}]);