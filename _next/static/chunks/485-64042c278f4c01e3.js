(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{4721:function(t,n,e){"use strict";var r=e(4836);n.Z=void 0;var i=r(e(4938)),a=e(5893);n.Z=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},2485:function(t,n,e){"use strict";e.d(n,{Z:function(){return J}});var r=e(5893),i=e(7294),a=e(7495),s=e(3795),d=e(6332),o=e(5616),c=e(9417),u=e(8456),l=e(5861),h=e(8703),v=e(1737),f=e(3111),w=e(9279),x=e(4627),j=e(5811),m=e(7979),p=e(1762),S=m.m4.chainId,k=function(t){var n,e=p.SEPOLIA.STAKER,r=(null!==(n=(0,x.W)({contract:(0,j._k)(S),method:"unbonds_new",args:t?[e,t]:[w.d,0]}))&&void 0!==n?n:{}).value;return r&&r[1].toNumber()},g=m.m4.chainId,N=e(7737),b=e(1435),C=e(1385),Z=e.n(C),A=e(4721),M=e(3946),W=e(5697),I=function(t){var n=t.message;return(0,r.jsx)(d.Z,{title:n,style:{maxHeight:20},children:(0,r.jsx)(M.Z,{children:(0,r.jsx)(A.Z,{})})})};I.propTypes={message:e.n(W)().string.isRequired};var T=I,J=function(t){var n,e,w,m=t.swapId,p=t.side,S=t.address,C=t.size,A=t.duration,M=t.createdAt,W=t.takenAt,I=t.rewards,J=t.otherSideRewards,_=t.shares,E=t.isSettled,y=t.isClaimed,L=t.canSettle,z=t.withdrawNonce,O=(0,a.K)(),R=O.chainId,V=O.account,B=(0,f.LA)(m,"Maker"===p),q=(0,f.Qc)(R),D=q.withdraw,Q=q.withdrawState,H=function(){var t,n=(null!==(t=(0,x.W)({contract:(0,j.Wp)(g),method:"getCurrentEpoch",args:[]}))&&void 0!==t?t:{}).value;return n&&n[0].toNumber()}(),P=k(z),K=(0,i.useState)(!1),U=K[0],F=K[1],G=(0,i.useState)(!1),X=(G[0],G[1]),Y=void 0;if(void 0!==B&&P&&H){var $=H-P;Y=$>=80?0:80-$}(0,i.useEffect)((function(){console.log(">> SwapSide - useEffect - withdrawState:",null===Q||void 0===Q?void 0:Q.status),"Mining"===Q.status&&X(!0),"Success"===Q.status&&(X(!1),F(!0))}),[null===Q||void 0===Q?void 0:Q.status,null===Q||void 0===Q||null===(n=Q.transaction)||void 0===n?void 0:n.hash]);var tt=function(t,n){"clickaway"!==n&&F(!1)},nt="Maker"===p?"Taker":"Maker",et=y?"".concat((0,b.Bw)(C,2)," MATIC paid to ").concat(p,", ").concat((0,b.Bw)(J,6)," MATIC paid to ").concat(nt):"";return(0,r.jsxs)("div",{className:Z().swapside,children:[(0,r.jsx)("h2",{children:"Maker"===p?"Maker Side":"Taker Side"}),(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"User"}),(0,r.jsxs)("td",{children:[S&&(0,r.jsx)(s.Z,{href:(0,N.q)("SEPOLIA",S),target:"_blank",children:(0,N.X)(S)}),S===V&&(0,r.jsx)("span",{style:{marginLeft:10},children:"(You)"})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Size:"}),(0,r.jsxs)("td",{children:[(0,b.Bw)(C,2)," MATIC"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Duration:"}),(0,r.jsxs)("td",{children:[A/86400," days ",W&&(0,r.jsx)(T,{message:(0,b._Q)(W,A)})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Maker"==p?"Created At":"Taken At"}),(0,r.jsx)("td",{children:"Maker"==p?(0,r.jsx)(d.Z,{title:(0,b.o0)(M),children:(0,r.jsx)("span",{children:(0,b.p6)(M)})}):W?(0,r.jsx)(d.Z,{title:(0,b.o0)(W),children:(0,r.jsx)("span",{children:(0,b.p6)(W)})}):(0,r.jsx)(r.Fragment,{})})]}),_&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Shares:"}),(0,r.jsxs)("td",{children:[" ",(0,b.Bw)(_,10)," TruMATIC"]})]}),I&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Rewards:"}),(0,r.jsxs)("td",{children:[I&&(0,b.Bw)(I,10)," MATIC"]})]}),E&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Settled:"}),(0,r.jsx)("td",{children:E?"\u2705 ":"No"})]}),0==E&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Can Settle:"}),(0,r.jsx)("td",{children:L?"Now ":"".concat((0,b.LW)(W,A))})]}),1==E&&void 0!==y&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Claimed:"}),(0,r.jsxs)("td",{children:[1==y&&(0,r.jsx)(d.Z,{title:et,children:(0,r.jsx)("span",{children:"\u2705"})}),!1===y&&"No"]})]})]})}),1==E&&0==y&&void 0!==B&&V===S&&(0,r.jsx)(o.Z,{textAlign:"center",children:(0,r.jsxs)(o.Z,{sx:{mt:2,marginLeft:"auto",marginRight:"auto"},alignItems:"center",style:{maxWidth:200},children:[(0,r.jsx)(c.Z,{variant:"outlined",onClick:function(){V===S?D(m):console.log("User is not the owner of this side of the swap")},disabled:0==B||"Mining"===Q.status,startIcon:"Mining"===Q.status?(0,r.jsx)(u.Z,{size:20}):null,children:"Claim"}),(0,r.jsxs)(l.Z,{sx:{mt:1},variant:"body2",color:"error",hidden:0===Y,children:["wait ",Y," epochs"]})]})}),(0,r.jsx)(h.Z,{open:U,autoHideDuration:1e4,onClose:tt,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,r.jsxs)(v.Z,{onClose:tt,severity:"success",sx:{width:"100%"},children:["Swap principal claimed and rewards paid!",(0,r.jsx)("br",{}),"View on block explorer: "," ",(0,r.jsx)(s.Z,{href:(0,N.q)("SEPOLIA",null===Q||void 0===Q||null===(e=Q.transaction)||void 0===e?void 0:e.hash,"transaction"),target:"_blank",children:null===Q||void 0===Q||null===(w=Q.transaction)||void 0===w?void 0:w.hash})]})})]})}},3111:function(t,n,e){"use strict";e.d(n,{LA:function(){return o},Qc:function(){return k},TV:function(){return f},V9:function(){return l},Wf:function(){return u},ZV:function(){return j},dQ:function(){return x},hf:function(){return m},hh:function(){return S},jv:function(){return h},kH:function(){return p},oV:function(){return w},wn:function(){return v}});var r=e(9279),i=e(4627),a=e(391),s=e(5811),d=e(7979).m4.chainId,o=function(t,n){var e,r=(null!==(e=(0,i.W)({contract:(0,s.sJ)(d),method:"canWithdraw",args:t?[t,n]:[0,!1]}))&&void 0!==e?e:{}).value;return r&&r[0]},c=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,s.sJ)(d),method:"getSwaps",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0].map((function(t){return g(t)}))},u=function(){var t;return null===(t=c())||void 0===t?void 0:t.filter((function(t){return void 0===t.taker.user}))},l=function(){var t;return null===(t=c())||void 0===t?void 0:t.filter((function(t){return void 0!==t.taker.user}))},h=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"getSwap",args:[t]}))&&void 0!==n?n:{}).value,r=null===e||void 0===e?void 0:e[0];if(void 0!==r)return g(r)},v=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"canSettle",args:[t]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},f=function(t){var n=(0,s.sJ)(d),e=t.map((function(t){return{contract:n,method:"canSettle",args:[t]}})),r=(0,i.G)(e),a={};return r.forEach((function(n,e){var r,i;a[t[e]]=[!0===(null===n||void 0===n||null===(r=n.value)||void 0===r?void 0:r[0]),!0===(null===n||void 0===n||null===(i=n.value)||void 0===i?void 0:i[1])]})),a},w=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,s.sJ)(d),method:"previewRewards",args:t?[t]:[0]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},x=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,s.sJ)(d),method:"token",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0]},j=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"offer",{transactionName:"Offer Swap"}),r=e.send;return{offer:function(t,n,e,i){return r(t,n,e,i)},offerState:e.state}},m=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"take",{transactionName:"Take Swap"}),r=e.send;return{take:function(t){return r(t)},takeState:e.state}},p=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"cancel",{transactionName:"Cancel Swap Offer"}),r=e.send;return{cancel:function(t){return r(t)},cancelState:e.state}},S=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"settle",{transactionName:"Settle"}),r=e.send;return{settle:function(t){return r(t)},settleState:e.state}},k=function(t){var n=(0,s.sJ)(t),e=(0,a.j)(n,"withdraw",{transactionName:"Withdraw"}),r=e.send;return{withdraw:function(t){return r(t)},withdrawState:e.state}},g=function(t){return{id:t.id.toNumber(),maker:N(t.maker),taker:N(t.taker)}},N=function(t){var n=t.user!=r.d;return{user:n?t.user:void 0,createdAt:n?new Date(1e3*t.createdAt.toNumber()):void 0,amount:t.amount,period:t.period.toNumber(),shares:t.shares,isSettled:t.isSettled,totalWithdrawn:t.totalWithdrawn,withdrawal:{unbondNonce:0==t.withdrawal.unbondNonce.toNumber()?void 0:t.withdrawal.unbondNonce.toNumber(),isClaimed:t.withdrawal.isClaimed,amount:t.withdrawal.amount.isZero()?void 0:t.withdrawal.amount}}}},1385:function(t){t.exports={swapside:"SwapSide_swapside__WMDqp"}}}]);