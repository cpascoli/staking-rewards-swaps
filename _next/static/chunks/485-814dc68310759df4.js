(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{4721:function(t,n,e){"use strict";var r=e(4836);n.Z=void 0;var i=r(e(4938)),a=e(5893);n.Z=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},2485:function(t,n,e){"use strict";e.d(n,{Z:function(){return J}});var r=e(603),i=e(5893),a=e(7294),o=e(7495),d=e(3795),s=e(6332),c=e(5616),u=e(9417),l=e(8456),h=e(5861),v=e(8703),f=e(1737),w=e(3111),j=e(9279),x=e(4627),m=e(5811),p=e(7979),S=e(1762),g=p.m4.chainId,k=function(t){var n,e=S.SEPOLIA.STAKER,r=(null!==(n=(0,x.W)({contract:(0,m._k)(g),method:"unbonds_new",args:t?[e,t]:[j.d,0]}))&&void 0!==n?n:{}).value;return r&&r[1].toNumber()},b=p.m4.chainId,y=e(7737),A=e(1435),Z=e(1385),C=e.n(Z),N=e(4721),I=e(3946),W=e(5697),M=function(t){var n=t.message;return(0,i.jsx)(s.Z,{title:n,style:{maxHeight:20},children:(0,i.jsx)(I.Z,{children:(0,i.jsx)(N.Z,{})})})};M.propTypes={message:e.n(W)().string.isRequired};var T=M,J=function(t){var n,e,j,p=t.swapId,S=t.side,g=t.address,Z=t.size,N=t.duration,I=t.createdAt,W=t.takenAt,M=t.rewards,J=(t.otherSideRewards,t.shares),E=t.isSettled,_=t.isClaimed,O=t.isOtherSideClaimed,R=t.canSettle,L=t.withdrawNonce,z=(0,o.K)(),V=z.chainId,B=z.account,q=(0,r.Z)((0,w.LA)(p,g),2),D=q[0],P=q[1],Q=(0,w.Qc)(V),H=Q.withdraw,U=Q.withdrawState,G=function(){var t,n=(null!==(t=(0,x.W)({contract:(0,m.Wp)(b),method:"getCurrentEpoch",args:[]}))&&void 0!==t?t:{}).value;return n&&n[0].toNumber()}(),K=k(L),F=(0,a.useState)(!1),X=F[0],Y=F[1],$=(0,a.useState)(!1),tt=($[0],$[1]),nt=void 0,et=!0===D||!0===P;if(void 0!==et&&K&&G){var rt=G-K;nt=rt>=80?0:80-rt}(0,a.useEffect)((function(){console.log(">> SwapSide - useEffect - withdrawState:",null===U||void 0===U?void 0:U.status),"Mining"===U.status&&tt(!0),"Success"===U.status&&(tt(!1),Y(!0))}),[null===U||void 0===U?void 0:U.status,null===U||void 0===U||null===(n=U.transaction)||void 0===n?void 0:n.hash]);var it=function(t,n){"clickaway"!==n&&Y(!1)},at="Maker"===S?"Taker":"Maker",ot=_?"".concat((0,A.Bw)(Z,2)," MATIC"):"",dt=O?"".concat((0,A.Bw)(M,2)," MATIC"):"";return(0,i.jsxs)("div",{className:C().swapside,children:[(0,i.jsx)("h2",{children:"Maker"===S?"Maker Side":"Taker Side"}),(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"User"}),(0,i.jsxs)("td",{children:[g&&(0,i.jsx)(d.Z,{href:(0,y.q)("SEPOLIA",g),target:"_blank",children:(0,y.X)(g)}),g===B&&(0,i.jsx)("span",{style:{marginLeft:10},children:"(You)"})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Size"}),(0,i.jsxs)("td",{children:[(0,A.Bw)(Z,2)," MATIC"]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Duration"}),(0,i.jsx)("td",{children:W?(0,i.jsx)(s.Z,{title:(0,A._Q)(W,N),children:(0,i.jsxs)("span",{children:[N/86400," days "]})}):(0,i.jsxs)("span",{children:[N/86400," days "]})})]}),M&&(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:["Rewards ",(0,i.jsx)(T,{message:"Staking rewards earned by the ".concat(at," and swapped with the ").concat(S)})," "]}),(0,i.jsx)("td",{children:(0,i.jsx)(s.Z,{title:"".concat(J&&(0,A.Bw)(J,2)," TruMATIC"),children:(0,i.jsx)("span",{children:M&&"".concat((0,A.Bw)(M,2)," MATIC")})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Maker"==S?"Created At":"Taken At"}),(0,i.jsx)("td",{children:"Maker"==S?(0,i.jsx)(s.Z,{title:(0,A.o0)(I),children:(0,i.jsx)("span",{children:(0,A.p6)(I)})}):W?(0,i.jsx)(s.Z,{title:(0,A.o0)(W),children:(0,i.jsx)("span",{children:(0,A.p6)(W)})}):(0,i.jsx)(i.Fragment,{})})]}),E&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Settled"}),(0,i.jsx)("td",{children:E?"\u2705 ":"No"})]}),0==E&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Can Settle"}),(0,i.jsx)("td",{children:R?"Now ":"".concat((0,A.LW)(W,N))})]}),1==E&&void 0!==_&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Claimed"}),(0,i.jsxs)("td",{children:[1==_&&(0,i.jsx)("span",{children:"\u2705"}),!1===_&&"No"]})]}),1==_&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Principal Received"}),(0,i.jsx)("td",{children:ot})]}),1==O&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Rewards Received"}),(0,i.jsx)("td",{children:dt})]})]})}),1==E&&0==_&&void 0!==et&&B===g&&(0,i.jsx)(c.Z,{textAlign:"center",children:(0,i.jsxs)(c.Z,{sx:{mt:2,marginLeft:"auto",marginRight:"auto"},alignItems:"center",style:{maxWidth:200},children:[(0,i.jsx)(u.Z,{variant:"contained",onClick:function(){B===g?H(p):console.log("User is not the owner of this side of the swap")},disabled:0==et||"Mining"===U.status,startIcon:"Mining"===U.status?(0,i.jsx)(l.Z,{size:20}):null,children:"Claim"}),void 0!==nt&&(0,i.jsxs)(h.Z,{sx:{mt:1},variant:"body2",color:"error",hidden:0===nt,children:["wait ",nt," epochs"]})]})}),(0,i.jsx)(v.Z,{open:X,autoHideDuration:1e4,onClose:it,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsxs)(f.Z,{onClose:it,severity:"success",sx:{width:"100%"},children:["Swap principal claimed and rewards paid!",(0,i.jsx)("br",{}),"View on block explorer: "," ",(0,i.jsx)(d.Z,{href:(0,y.q)("SEPOLIA",null===U||void 0===U||null===(e=U.transaction)||void 0===e?void 0:e.hash,"transaction"),target:"_blank",children:null===U||void 0===U||null===(j=U.transaction)||void 0===j?void 0:j.hash})]})})]})}},3111:function(t,n,e){"use strict";e.d(n,{LA:function(){return f},Qc:function(){return k},TV:function(){return v},V9:function(){return u},Wf:function(){return c},ZV:function(){return m},dQ:function(){return x},hf:function(){return p},hh:function(){return g},jv:function(){return l},kH:function(){return S},oV:function(){return j},ol:function(){return w},wn:function(){return h}});var r=e(9279),i=e(4627),a=e(391),o=e(5811),d=e(7979).m4.chainId,s=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,o.sJ)(d),method:"getSwaps",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0].map((function(t){return b(t)}))},c=function(){var t;return null===(t=s())||void 0===t?void 0:t.filter((function(t){return void 0===t.taker.user}))},u=function(){var t;return null===(t=s())||void 0===t?void 0:t.filter((function(t){return void 0!==t.taker.user}))},l=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,o.sJ)(d),method:"getSwap",args:[t]}))&&void 0!==n?n:{}).value,r=null===e||void 0===e?void 0:e[0];if(void 0!==r)return b(r)},h=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,o.sJ)(d),method:"canSettle",args:[t]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},v=function(t){var n=(0,o.sJ)(d),e=t.map((function(t){return{contract:n,method:"canSettle",args:[t]}})),r=(0,i.G)(e),a={};return r.forEach((function(n,e){var r,i;a[t[e]]=[!0===(null===n||void 0===n||null===(r=n.value)||void 0===r?void 0:r[0]),!0===(null===n||void 0===n||null===(i=n.value)||void 0===i?void 0:i[1])]})),a},f=function(t,n){var e,a=(null!==(e=(0,i.W)({contract:(0,o.sJ)(d),method:"canWithdraw",args:n?[t,n]:[0,r.d]}))&&void 0!==e?e:{}).value;return[null===a||void 0===a?void 0:a[0],null===a||void 0===a?void 0:a[1]]},w=function(t,n){var e=(0,o.sJ)(d),a=t.map((function(t){return{contract:e,method:"canWithdraw",args:n?[t,n]:[0,r.d]}})),s=(0,i.G)(a),c={};return s.forEach((function(n,e){var r,i;c[t[e]]=[!0===(null===n||void 0===n||null===(r=n.value)||void 0===r?void 0:r[0]),!0===(null===n||void 0===n||null===(i=n.value)||void 0===i?void 0:i[1])]})),c},j=function(t){var n,e=(null!==(n=(0,i.W)({contract:(0,o.sJ)(d),method:"previewRewards",args:t?[t]:[0]}))&&void 0!==n?n:{}).value;return[null===e||void 0===e?void 0:e[0],null===e||void 0===e?void 0:e[1]]},x=function(){var t,n=(null!==(t=(0,i.W)({contract:(0,o.sJ)(d),method:"token",args:[]}))&&void 0!==t?t:{}).value;return null===n||void 0===n?void 0:n[0]},m=function(t){var n=(0,o.sJ)(t),e=(0,a.j)(n,"offer",{transactionName:"Offer Swap"}),r=e.send;return{offer:function(t,n,e,i){return r(t,n,e,i)},offerState:e.state}},p=function(t){var n=(0,o.sJ)(t),e=(0,a.j)(n,"take",{transactionName:"Take Swap"}),r=e.send;return{take:function(t){return r(t)},takeState:e.state}},S=function(t){var n=(0,o.sJ)(t),e=(0,a.j)(n,"cancel",{transactionName:"Cancel Swap Offer"}),r=e.send;return{cancel:function(t){return r(t)},cancelState:e.state}},g=function(t){var n=(0,o.sJ)(t),e=(0,a.j)(n,"settle",{transactionName:"Settle"}),r=e.send;return{settle:function(t){return r(t)},settleState:e.state}},k=function(t){var n=(0,o.sJ)(t),e=(0,a.j)(n,"withdraw",{transactionName:"Withdraw"}),r=e.send;return{withdraw:function(t){return r(t)},withdrawState:e.state}},b=function(t){return{id:t.id.toNumber(),maker:y(t.maker),taker:y(t.taker)}},y=function(t){var n=t.user!=r.d;return{user:n?t.user:void 0,createdAt:n?new Date(1e3*t.createdAt.toNumber()):void 0,amount:t.amount,period:t.period.toNumber(),shares:t.shares,isSettled:t.isSettled,totalWithdrawn:t.totalWithdrawn,withdrawal:{unbondNonce:0==t.withdrawal.unbondNonce.toNumber()?void 0:t.withdrawal.unbondNonce.toNumber(),isClaimed:t.withdrawal.isClaimed,amount:t.withdrawal.amount.isZero()?void 0:t.withdrawal.amount}}}},1385:function(t){t.exports={swapside:"SwapSide_swapside__WMDqp"}},603:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function i(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"===typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.d(n,{Z:function(){return i}})}}]);