(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6227)}])},3111:function(n,e,t){"use strict";t.d(e,{LA:function(){return v},Qc:function(){return k},TV:function(){return h},V9:function(){return s},Wf:function(){return c},ZV:function(){return w},dQ:function(){return m},hf:function(){return p},hh:function(){return Z},jv:function(){return u},kH:function(){return g},oV:function(){return j},ol:function(){return x},wn:function(){return f}});var r=t(9279),i=t(4627),a=t(391),o=t(5811),d=t(7979).m4.chainId,l=function(){var n,e=(null!==(n=(0,i.W)({contract:(0,o.sJ)(d),method:"getSwaps",args:[]}))&&void 0!==n?n:{}).value;return null===e||void 0===e?void 0:e[0].map((function(n){return S(n)}))},c=function(){var n;return null===(n=l())||void 0===n?void 0:n.filter((function(n){return void 0===n.taker.user}))},s=function(){var n;return null===(n=l())||void 0===n?void 0:n.filter((function(n){return void 0!==n.taker.user}))},u=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,o.sJ)(d),method:"getSwap",args:[n]}))&&void 0!==e?e:{}).value,r=null===t||void 0===t?void 0:t[0];if(void 0!==r)return S(r)},f=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,o.sJ)(d),method:"canSettle",args:[n]}))&&void 0!==e?e:{}).value;return[null===t||void 0===t?void 0:t[0],null===t||void 0===t?void 0:t[1]]},h=function(n){var e=(0,o.sJ)(d),t=n.map((function(n){return{contract:e,method:"canSettle",args:[n]}})),r=(0,i.G)(t),a={};return r.forEach((function(e,t){var r,i;a[n[t]]=[!0===(null===e||void 0===e||null===(r=e.value)||void 0===r?void 0:r[0]),!0===(null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i[1])]})),a},v=function(n,e){var t,a=(null!==(t=(0,i.W)({contract:(0,o.sJ)(d),method:"canWithdraw",args:e?[n,e]:[0,r.d]}))&&void 0!==t?t:{}).value;return[null===a||void 0===a?void 0:a[0],null===a||void 0===a?void 0:a[1]]},x=function(n,e){var t=(0,o.sJ)(d),a=n.map((function(n){return{contract:t,method:"canWithdraw",args:e?[n,e]:[0,r.d]}})),l=(0,i.G)(a),c={};return l.forEach((function(e,t){var r,i;c[n[t]]=[!0===(null===e||void 0===e||null===(r=e.value)||void 0===r?void 0:r[0]),!0===(null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i[1])]})),c},j=function(n){var e,t=(null!==(e=(0,i.W)({contract:(0,o.sJ)(d),method:"previewRewards",args:n?[n]:[0]}))&&void 0!==e?e:{}).value;return[null===t||void 0===t?void 0:t[0],null===t||void 0===t?void 0:t[1]]},m=function(){var n,e=(null!==(n=(0,i.W)({contract:(0,o.sJ)(d),method:"token",args:[]}))&&void 0!==n?n:{}).value;return null===e||void 0===e?void 0:e[0]},w=function(n){var e=(0,o.sJ)(n),t=(0,a.j)(e,"offer",{transactionName:"Offer Swap"}),r=t.send;return{offer:function(n,e,t,i){return r(n,e,t,i)},offerState:t.state}},p=function(n){var e=(0,o.sJ)(n),t=(0,a.j)(e,"take",{transactionName:"Take Swap"}),r=t.send;return{take:function(n){return r(n)},takeState:t.state}},g=function(n){var e=(0,o.sJ)(n),t=(0,a.j)(e,"cancel",{transactionName:"Cancel Swap Offer"}),r=t.send;return{cancel:function(n){return r(n)},cancelState:t.state}},Z=function(n){var e=(0,o.sJ)(n),t=(0,a.j)(e,"settle",{transactionName:"Settle"}),r=t.send;return{settle:function(n){return r(n)},settleState:t.state}},k=function(n){var e=(0,o.sJ)(n),t=(0,a.j)(e,"withdraw",{transactionName:"Withdraw"}),r=t.send;return{withdraw:function(n){return r(n)},withdrawState:t.state}},S=function(n){return{id:n.id.toNumber(),maker:C(n.maker),taker:C(n.taker)}},C=function(n){var e=n.user!=r.d;return{user:e?n.user:void 0,createdAt:e?new Date(1e3*n.createdAt.toNumber()):void 0,amount:n.amount,period:n.period.toNumber(),shares:n.shares,isSettled:n.isSettled,totalWithdrawn:n.totalWithdrawn,withdrawal:{unbondNonce:0==n.withdrawal.unbondNonce.toNumber()?void 0:n.withdrawal.unbondNonce.toNumber(),isClaimed:n.withdrawal.isClaimed,amount:n.withdrawal.amount.isZero()?void 0:n.withdrawal.amount}}}},6227:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return F}});var r=t(5893),i=t(9873),a=t.n(i),o=t(6042),d=t(9396),l=t(9534),c=t(603),s=t(7294),u=t(1163),f=t(7495),h=t(3111),v=t(5616),x=t(9417),j=t(7906),m=t(6332),w=t(3795),p=t(1435),g=function(n){var e=(0,u.useRouter)(),t=n.offers;return(0,r.jsxs)(j.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"ID"}),(0,r.jsx)("td",{children:"Created At"}),(0,r.jsx)("td",{colSpan:3,align:"center",children:"Swap Offer Info"}),(0,r.jsx)("td",{})]})}),(0,r.jsx)("tbody",{children:t&&t.map((function(n,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.id}),(0,r.jsx)("td",{children:(0,r.jsx)(m.Z,{title:(0,p.o0)(n.maker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.maker.createdAt)})})}),(0,r.jsxs)("td",{align:"right",children:[(0,p.Bw)(n.maker.amount,2)," MATIC for ",Math.round(n.maker.period/86400)," days"]}),(0,r.jsx)("td",{align:"center",children:" \ud83d\udd00 "}),(0,r.jsxs)("td",{align:"left",children:[(0,p.Bw)(n.taker.amount,2)," MATIC for ",Math.round(n.taker.period/86400)," days"]}),(0,r.jsx)("td",{style:{textAlign:"center"},children:(0,r.jsx)(w.Z,{onClick:function(){return e.push("/offer/".concat(n.id))},children:" Details"})})]},t)}))})]})},Z=function(){var n,e=(0,u.useRouter)(),t=((0,h.dQ)(),(0,f.K)().account),i=null===(n=(0,h.Wf)())||void 0===n?void 0:n.reverse();if(!i)return(0,r.jsx)(v.Z,{textAlign:"center",sx:{marginTop:10,marginBottom:8},children:"Loading..."});var a=null===i||void 0===i?void 0:i.filter((function(n){return n.maker.user===t})),o=null===i||void 0===i?void 0:i.filter((function(n){return n.maker.user!==t}));return(0,r.jsxs)("div",{children:[a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"My Swap Offers"}),(0,r.jsx)("div",{style:{margin:"auto",overflowX:"auto"},children:(0,r.jsx)(g,{offers:a})})]}),o.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:a.length>0?"Other Swap Offers":"Swap Offers"}),(0,r.jsx)("div",{style:{margin:"auto",overflowX:"auto"},children:(0,r.jsx)(g,{offers:o})})]}),0===i.length&&(0,r.jsx)(v.Z,{textAlign:"center",children:(0,r.jsx)("h3",{children:"No Offers - Create a new Swap Offer"})}),(0,r.jsx)(v.Z,{sx:{mt:4},textAlign:"center",children:(0,r.jsx)(x.Z,{variant:"contained",onClick:function(){e.push("/new-swap")},children:"New Offer"})})]})},k=t(4924),S=t(6836),C=t(5071),b=t(8396),A=t(8383),N=t(3184),y=t(3816),I=t(3252),W=t(295),J=t(2734),M=function(n){var e=n.swaps,t=n.canSettleSwapsInfoDict,i=void 0===t?{}:t,a=n.canWithdrawSwapsInfoDict,o=void 0===a?{}:a,d=(0,u.useRouter)(),l=(0,J.Z)(),c=(0,b.Z)(l.breakpoints.down("sm")),s=function(n){d.push("/swap/".concat(n))};return(0,r.jsx)(A.Z,{children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(N.Z,{children:(0,r.jsxs)(y.Z,{children:[!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{children:"ID"}),(0,r.jsx)(I.Z,{sx:{padding:"8px"},colSpan:3,align:"center",style:{minWidth:200},children:"Swap Info"}),(0,r.jsx)(I.Z,{children:"Created At"}),(0,r.jsx)(I.Z,{children:"Taken At"}),(0,r.jsx)(I.Z,{})]}),c&&(0,r.jsx)(I.Z,{sx:{padding:"8px"},colSpan:3,align:"center",style:{minWidth:200},children:"Swap Info"})]})}),(0,r.jsx)(W.Z,{children:e&&e.map((function(n,e){i[n.id]&&(!0===i[n.id][0]||i[n.id][1]),o[n.id]&&(!0===o[n.id][0]||o[n.id][1]);return(0,r.jsxs)(y.Z,{onClick:c?function(){return s(n.id)}:void 0,style:{cursor:c?"pointer":"default"},children:[!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{align:"right",children:n.id}),(0,r.jsxs)(I.Z,{align:"right",children:[(0,p.Bw)(n.maker.amount,2)," MATIC for ",Math.round(n.maker.period/86400)," days"]}),(0,r.jsx)(I.Z,{align:"center",children:" \ud83d\udd00 "}),(0,r.jsxs)(I.Z,{align:"left",children:[(0,p.Bw)(n.taker.amount,2)," MATIC for ",Math.round(n.taker.period/86400)," days"]}),(0,r.jsx)(I.Z,{align:"center",children:(0,r.jsx)(m.Z,{title:(0,p.o0)(n.maker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.maker.createdAt)})})}),(0,r.jsx)(I.Z,{align:"center",children:n.taker.createdAt&&(0,r.jsx)(m.Z,{title:(0,p.o0)(n.taker.createdAt),children:(0,r.jsx)("span",{children:(0,p.p6)(n.taker.createdAt)})})}),(0,r.jsx)(I.Z,{align:"center",children:(0,r.jsx)(w.Z,{onClick:function(){return s(n.id)},children:"Details"})})]}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(I.Z,{align:"right",children:[(0,p.Bw)(n.maker.amount,2)," MATIC for ",Math.round(n.maker.period/86400)," days"]}),(0,r.jsx)(I.Z,{align:"center",children:" \ud83d\udd00 "}),(0,r.jsxs)(I.Z,{align:"left",children:[(0,p.Bw)(n.taker.amount,2)," MATIC for ",Math.round(n.taker.period/86400)," days"]})]})]},n.id)}))})]})})},O=function(){(0,u.useRouter)();var n=(0,h.V9)(),e=(0,f.K)().account,t=(0,h.TV)(n?n.map((function(n){return n.id})):[]),i=(0,h.ol)(n?n.map((function(n){return n.id})):[],e),a=(0,s.useState)({mySwaps:!1,canSettle:!1,canClaim:!1,isPaid:!1}),l=a[0],c=a[1];(0,s.useEffect)((function(){var n=localStorage.getItem("filters");n&&c(JSON.parse(n))}),[]),(0,s.useEffect)((function(){localStorage.setItem("filters",JSON.stringify(l))}),[l]);var x=function(n){c((0,d.Z)((0,o.Z)({},l),(0,k.Z)({},n.target.name,n.target.checked)))};if(!n||!t||!i)return(0,r.jsx)(v.Z,{textAlign:"center",sx:{marginTop:10,marginBottom:8},children:"Loading..."});var j=n&&n.reverse(),m=j&&j.filter((function(n){return(!l.mySwaps||n.maker.user===e||n.taker.user===e)&&((!l.canSettle||!0===t[n.id][0]||!0===t[n.id][1])&&((!l.canClaim||!0===i[n.id][0]||!0===i[n.id][1])&&(!l.isPaid||!1!==n.maker.withdrawal.isClaimed&&!1!==n.taker.withdrawal.isClaimed)))}));return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Swaps"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(S.Z,{control:(0,r.jsx)(C.Z,{checked:l.mySwaps,onChange:x,name:"mySwaps"}),label:"My Swaps"}),(0,r.jsx)(S.Z,{control:(0,r.jsx)(C.Z,{checked:l.canSettle,onChange:x,name:"canSettle"}),label:"Can Be Settled"}),(0,r.jsx)(S.Z,{control:(0,r.jsx)(C.Z,{checked:l.canClaim,onChange:x,name:"canClaim"}),label:"Can Be Claimed"}),(0,r.jsx)(S.Z,{control:(0,r.jsx)(C.Z,{checked:l.isPaid,onChange:x,name:"isPaid"}),label:"Is Paid"})]}),0===m.length&&(0,r.jsx)(v.Z,{textAlign:"center",sx:{my:4},children:"No swap found"}),m.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{margin:"auto"},children:(0,r.jsx)(M,{swaps:m,canSettleSwapsInfoDict:t,canWithdrawSwapsInfoDict:i})})}),0===j.length&&(0,r.jsx)(v.Z,{textAlign:"center",children:(0,r.jsx)("h3",{children:"No Swaps"})})]})},T=t(1703),_=t(44);function B(n){var e=n.children,t=n.value,i=n.index,a=(0,l.Z)(n,["children","value","index"]);return(0,r.jsx)("div",(0,d.Z)((0,o.Z)({role:"tabpanel",hidden:t!==i,id:"tabpanel-".concat(i),"aria-labelledby":"tab-".concat(i)},a),{children:t===i&&(0,r.jsx)(v.Z,{sx:{px:1},children:e})}))}var D=function(){var n=(0,c.Z)(s.useState(0),2),e=n[0],t=n[1],i=(0,u.useRouter)().query.selectedTab;(0,s.useEffect)((function(){i&&"swaps"===i&&(console.log("Selected Item ID: ".concat(i)),t(1))}),[i]);return(0,r.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,r.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(T.Z,{value:e,onChange:function(n,e){t(e)},"aria-label":"staker tabs",children:[(0,r.jsx)(_.Z,{label:"Offers"},1),(0,r.jsx)(_.Z,{label:"Swaps"},2)]})}),(0,r.jsx)(B,{value:e,index:0,children:(0,r.jsx)(Z,{})},"offers"),(0,r.jsx)(B,{value:e,index:1,children:(0,r.jsx)(O,{})},"swaps")]})},E=function(){return(0,r.jsx)("div",{className:a().main,children:(0,r.jsx)(D,{})})},F=function(){return(0,r.jsx)(E,{})}},9873:function(n){n.exports={main:"Main_main__NBUfF"}}},function(n){n.O(0,[753,774,888,179],(function(){return e=8312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);